- order_id: a2cdff8b-03f7-4f96-bc95-ddc6ccb98bb0
  version: 1
  from_role: ESTADO-MAIOR
  to_role: SOP
  project: FABRICA
  module: TORRE
  gate: G0
  urgency: high
  created_at: "2025-10-31T16:40:00Z"
  expires_at: "2025-11-03T23:59:59Z"
  context_refs:
    - relatorios/torre_status.json
  objective:
    Ler relatorios/torre_status.json e BLOQUEAR G0/G1 se constitution_ok=false
    ou triade_ok=false.
  constraints:
    - ART-01/02/03/04/07/09/10; respeitar constituição e tríade
  steps:
    - Validar relatorios/torre_status.json (campos constitution_ok/triade_ok)
    - "Se algum = false → status: BLOCKED, reportar violação explícita"
    - "Se ambos = true → status: PASS"
  deliverables:
    - path: relatorios/torre_sop_review.md
      type: markdown
  success_criteria:
    - Decisão clara de PASS/BLOCKED com evidências citadas
  escalation:
    owner: "@EstadoMaior"
    when: arquivo ausente ou inválido
  checksum: ""
  signature: ""
  ack:
    by: null
    at: null
    status: PENDING
  status: OPEN
- order_id: 2330e51e-f14f-4eda-bbb7-baeccc2bd736
  version: 1
  from_role: ESTADO-MAIOR
  to_role: SOP
  project: FABRICA
  module: TORRE
  gate: G1
  urgency: alta
  created_at: "2025-11-01T01:42:00Z"
  expires_at: "2025-11-08T23:59:59Z"
  context_refs:
    - core/sop/leis.yaml
    - core/sop/exceptions.yaml
    - core/orquestrador/cli.py
    - pipeline/superpipeline.yaml
    - relatorios/parecer_gatekeeper.md
  objective:
    Verificar todas as leis aplicáveis e código ativo, procurando por incongruências,
    prioridades erradas ou artigos que conflitem — e listar qualquer caso em que código
    ou artigo de lei sobreponha, ignore, ou viole regras superiores (Tríade, Constituição,
    ART-01..ART-10).
  constraints:
    - Se houver qualquer violação ou sobreposição indevida, STATUS = BLOQUEADO até correção
      explícita.
    - Relatório obrigatoriamente detalhado, rastreável por citações.
  steps:
    - Recolher e analisar core/sop/leis.yaml e core/sop/exceptions.yaml
    - Varredura dos scripts/core atuais por comandos que possam atropelar pipelines/leis
    - Comparar cada artigo de lei com regras superiores (constituição, tríade, pipeline
      oficial)
    - Emitir relatório detalhado em relatorios/sop_incongruencias_torre.md
  deliverables:
    - path: relatorios/sop_incongruencias_torre.md
      type: markdown
    - path: relatorios/sop_status.json
      type: json
  success_criteria:
    - Nenhuma incongruência relevante encontrada OU todas identificadas claramente no
      relatório com ações corretivas sugeridas.
    - Status final = PASS somente se tudo rastreável e sem sobreposição maliciosa.
  escalation:
    owner: "@EstadoMaior"
    when:
      Qualquer incongruência não resolvida, omissão no relatório ou repetição
      do erro.
  checksum: ""
  signature: ""
  ack:
    by: null
    at: null
    status: PENDING
  status: DONE
  completed_at: "2025-11-01T01:48:53.592820+00:00"
- order_id: 3be0ce0f-f0df-4bcc-8b64-b4e5e394db4a
  version: 1
  from_role: ESTADO-MAIOR
  to_role: SOP
  project: FABRICA
  module: TORRE
  gate: Gx
  urgency: alta
  created_at: "2025-11-01T12:31:00Z"
  expires_at: "2025-11-08T23:59:59Z"
  context_refs:
    - relatorios/torre_sop_review.md
    - core/sop/leis.yaml
  objective:
    Executar auditoria constitucional e de conformidade — varrer artefactos
    e leis, relatar eventuais incongruências e registar progresso N/M no relatório
    final no mailbox.
  constraints:
    - "Status só pode ser PASS se marcar explicitamente progresso_capitulo: N/M no artefacto/mailbox."
    - Bloquear gate caso encontre violação expressa ou omissão legal.
  steps:
    - Varrer todos os artefactos e leis aplicáveis na pipeline TORRE
    - Emitir relatório técnico com eventuais findings
    - Registrar progresso (N/M) explícito no fecho
  deliverables:
    - path: relatorios/sop_incongruencias_torre.md
      type: markdown
    - path: relatorios/sop_status.json
      type: json
    - path: relatorios/para_estado_maior/sop.out.json
      type: json
  success_criteria:
    - Status PASS com progresso N/M explícito OU listado motivos/erros.
  escalation:
    owner: "@EstadoMaior"
    when: Falha de conclusão ou omissão de incongruência.
  checksum: ""
  signature: ""
  ack:
    by: null
    at: null
    status: PENDING
  status: DONE
  completed_at: "2025-11-02T11:45:38.578335+00:00"
- order_id: a3b4c5d6-e7f8-9a0b-1c2d-3e4f5a6b7c8d
  version: 1
  from_role: ESTADO-MAIOR
  to_role: SOP
  project: FABRICA
  module: GOVERNANCA
  gate: GERAL
  urgency: alta
  created_at: "2025-11-02T22:00:00Z"
  expires_at: "2025-11-09T23:59:59Z"
  context_refs:
    - factory/pins/pre_commit.yaml
    - core/sop/doutrina.yaml
    - core/sop/leis.yaml
    - core/sop/constituicao.yaml
  objective:
    Analisar e emitir parecer detalhado sobre o PIN do novo agente PRE_COMMIT
    (factory/pins/pre_commit.yaml), validando conformidade total com Constituição
    (ART-01 a ART-10), Leis e Doutrinas antes de aprovar criação deste agente.
  constraints:
    - Validar se file_access_policy está conforme doutrina.yaml
    - Verificar se não há conflitos com outros agentes (Engenheiro, SOP, Gatekeeper)
    - Confirmar que salvaguardas são adequadas e não permitem bypass indevido
    - Garantir que não viola ART-02 (Tríade), ART-05 (Supervisão), ART-10 (Continuidade)
  steps:
    - type: validation
      validation: sop
      description:
        Analisar PIN completo e emitir parecer detalhado com recomendação
        APROVADO/BLOQUEADO
  deliverables:
    - path: relatorios/para_estado_maior/parecer_sop_pin_pre_commit.md
      type: markdown
    - path: relatorios/para_estado_maior/sop.out.json
      type: json
  success_criteria:
    - Parecer claro com análise de cada secção do PIN
    - Decisão explícita: APROVADO ou BLOQUEADO (com motivo)
    - Se BLOQUEADO, lista de correções necessárias
  escalation:
    owner: "@EstadoMaior"
    when: Conflito não resolvível ou violação constitucional detectada
  checksum: ""
  signature: ""
  ack:
    by: ESTADO-MAIOR
    at: "2025-11-02T22:00:00Z"
    status: ACCEPTED
  status: OPEN
- order_id: sop-ajustar-doutrina-comandos-externos-2025-11-02
  version: 1
  from_role: ESTADO-MAIOR
  to_role: SOP
  project: FABRICA
  module: GOVERNANCA
  gate: GERAL
  urgency: alta
  created_at: "2025-11-02T22:30:00Z"
  expires_at: "2025-11-09T23:59:59Z"
  context_refs:
    - core/sop/doutrina.yaml
    - relatorios/para_estado_maior/decisao_estado_maior_funcoes_gatekeeper.md
    - relatorios/para_estado_maior/parecer_gatekeeper_funcoes_adicionais_sop.md
  objective:
    Ajustar doutrina de acesso a ficheiros (core/sop/doutrina.yaml) para
    clarificar que o Gatekeeper pode executar comandos externos APENAS para validação
    (dry-run, smoke tests), sem modificar código-fonte ou configurações.
  constraints:
    - Manter imutabilidade da doutrina — apenas clarificar, não alterar princípios
    - Garantir que comandos externos são APENAS para validação (read-only, dry-run)
    - Proibir explicitamente qualquer comando que modifique código-fonte ou configurações
  steps:
    - type: validation
      validation: sop
      description:
        Analisar secção gatekeeper em doutrina.yaml e adicionar clarificação
        sobre execução de comandos externos para validação
    - type: command
      command:
        Atualizar core/sop/doutrina.yaml com nova secção 'executar_comandos_externos'
        para gatekeeper
      description:
        Adicionar clarificação sobre comandos externos permitidos (apenas
        validação)
  deliverables:
    - path: core/sop/doutrina.yaml
      type: yaml
      description:
        Doutrina atualizada com clarificação sobre comandos externos para
        validação
    - path: relatorios/para_estado_maior/sop.out.json
      type: json
      description: Relatório de ajuste da doutrina
  success_criteria:
    - Doutrina clarifica que Gatekeeper pode executar comandos externos APENAS para
      validação
    - Doutrina proíbe explicitamente comandos que modifiquem código-fonte ou configurações
    - Exemplos claros de comandos permitidos (vercel build dry-run) e proibidos (git
      commit)
  escalation:
    owner: "@EstadoMaior"
    when: Conflito com princípios imutáveis da doutrina ou violação constitucional
  checksum: ""
  signature: ""
  ack:
    by: ESTADO-MAIOR
    at: "2025-11-02T22:30:00Z"
    status: ACCEPTED
  status: DONE
  completed_at: "2025-11-06T16:11:27.799162+00:00"
