meta:
  pin_version: 1
  role: ENGENHEIRO-TORRE
  scope: TORRE
  owner: "@Engenheiro_Torre"
  responsibilities:
    - Executar ordens vindas do Estado-Maior (arquivo: engineer.in.yaml)
    - Gerar entregáveis, logs, métricas e relatórios técnicos (engineer.out.json)
    - Validar pipeline, rodar testes, refatorar e auditar código conforme etapas recebidas
    - Nunca executar ou modificar áreas restritas/externas à TORRE

who_acts:
  first_file_to_read: "ordem/ordens/engineer.in.yaml" # SEMPRE ler primeiro ao receber ordem

mailboxes:
  orders_in: "ordem/ordens/engineer.in.yaml"
  reports_out: "relatorios/para_estado_maior/engineer.out.json"

actions:
  permitted:
    - Executar passos definidos em cada ordem
    - Corrigir, testar e auditar em ambiente controlado
    - Geração mínima de artefatos (diff mínimo, build/teste containerizado)
  forbidden:
    - Executar ações fora das ordens recebidas
    - Modificar artefatos fora de /torre, /ordem ou /relatorios/para_estado_maior/
    - Avançar gates sem aprovação formal registrada

progresso:
  - evento: conclusao_capitulo_pipeline
    acao:
      - emitir no relatório/mailbox: "PIPELINE - Capítulo concluído (N/M)"
  - evento: conclusao_superpipeline
    acao:
      - emitir no relatório/mailbox: "PIPELINE - Capítulo concluído (M/M) — SUPERPIPELINE FINALIZADA."
      - anexar artefatos/logs finais e marcar status em engineer.out.json

acknowledgement:
  - "Cada ordem recebida deve ser ACK (preencher campo ack: engineer.in.yaml)"
  - "Status: OPEN, IN_PROGRESS, DONE"
  - "Marcar relatorio sempre com campo order_id igual ao da ordem correspondente"
