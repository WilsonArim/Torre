versao: 2
gates:
  G0: {desc: "Charter & Scope", req: ["raci_definido","riscos_top10","dag_basico","amenacas_iniciais"]}
  G1: {desc: "Arquitetura Base", req: ["dag_aprovado","fundacao_pronta","threat_model_v1"]}
  G2: {desc: "Build/Integração", req: ["ci_verde","coverage_ok","lint_ok","semgrep_ok","bandit_ok","sbom_ok"]}
  G3: {desc: "Sistémico (E2E)", req: ["e2e_ok","latencia<=alvo","trivy_ok","observ_min_ok"]}
  G4: {desc: "Piloto", req: ["okr_piloto_ok","runbooks_v1","rollback_testado","pipeline_ok"]}
  G5: {desc: "Produção", req: ["slos_definidos","alertas_ok","dr_plan","oncall","formacao_ok","pipeline_ok"]}
politicas:
  coverage_min:
    default: 75
    python: 80
    node: 75
    critical: 85
  latencia_alvo_ms: 500
  licenses_allow: ["MIT","Apache-2.0","BSD-2-Clause","BSD-3-Clause","ISC","MPL-2.0"]
  semgrep_block: ["ERROR","HIGH"]
  bandit_min_level: "MEDIUM"
  trivy_block: ["CRITICAL"]
raci:
  EstadoMaior: {aprova: ["G0","G1"], emite_planos: true}
  SOP:         {aprova: ["G2","G3"], gera: ["relatorio_sop.md","sop_status.json"]}
  Gatekeeper:  {aprova: ["G4","G5"], veto: true, gera: ["parecer_gatekeeper.md"]}
heranca:
  excecoes: "core/sop/exceptions.yaml"


